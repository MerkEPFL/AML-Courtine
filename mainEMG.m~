
%% EMG Loading 
file = fullfile([pwd,'/Exercise - Material - SCI Subject/FLOAT_NO_CRUTCHES_NEW/MAT'],'FLOAT_NO_CRUTCHES_NEW.mat');
data_float = load(file);
file = fullfile([pwd,'/Exercise - Material - SCI Subject/NO_FLOAT_CRUTCHES_NEW/MAT'],'NO_FLOAT_CRUTCHES_NEW.mat');
data_no_float = load(file);

SCI_float.T1 = data_float.FLOAT_NO_CRUTCHES_NEW.T_01.Raw.EMG;
SCI_float.T2 = data_float.FLOAT_NO_CRUTCHES_NEW.T_02.Raw.EMG;
SCI_float.T3 = data_float.FLOAT_NO_CRUTCHES_NEW.T_03.Raw.EMG;

SCI_no_float.T1 = data_no_float.NO_FLOAT_CRUTCHES_NEW.T_01.Raw.EMG;
SCI_no_float.T2 = data_no_float.NO_FLOAT_CRUTCHES_NEW.T_02.Raw.EMG;
SCI_no_float.T3 = data_no_float.NO_FLOAT_CRUTCHES_NEW.T_03.Raw.EMG;

clear data_no_float data_float file

%% EMG Denoising 

% using wavelet transform
test = wdenoise(SCI_float.T1.LMG,4,'Wavelet','db6');

% using filtering 
dspec = fdesign.bandpass('Fp1,Fst1,Fst2,Fp2,Ap1,Ast,Ap2',18,20,,53,1,60,1,fs);
designedFilter = design(dspec,'equiripple');

figure();
plot(test(1:5000))
hold on;
plot(SCI_float.T1.LMG(1:5000))
legend();





%% EMG enveloppe 

% RMS enveloppe

[yupper,ylower] = envelope(SCI_float.T1.LMG,200,'rms');

figure();
plot(yupper)
hold on;
plot(ylower)
hold on;
plot(SCI_float.T1.LMG)


